graph TD
    User((User))
    
    subgraph Client ["Client Side (Vite/React)"]
        App["App Controller"]
        
        subgraph Engines ["Graph Engines (React Flow)"]
            %% EXPLICIT NAMING
            StructuralEngine["Algebraic Structural Engine<br/>(Nodes: Axiom Systems)"]
            DeductiveEngine["Theorem Deductive Engine<br/>(Nodes: Theorem Proofs)"]
        end
        
        Logic["Lineage Utility<br/>(Fetch Parents)"]
        Math["KaTeX Renderer"]
    end

    subgraph Data ["Firebase"]
        DB_Axioms[("Collection: StructureNodes")]
        DB_Theorems[("Collection: TheoremNodes")]
    end

    %% Flow
    User --> App
    %% Explicit Navigation Labels
    App --"View: Algebraic Structure"--> StructuralEngine
    App --"View: Theorem Deduction"--> DeductiveEngine
    
    StructuralEngine --"Select System"--> DeductiveEngine
    
    DeductiveEngine --> Logic
    DeductiveEngine --> Math
    StructuralEngine --> Math
    
    StructuralEngine <--> DB_Axioms
    DeductiveEngine <--> DB_Theorems